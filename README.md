# API YaMDb

### Описание
Проект YaMDb собирает отзывы пользователей на различные произведения.
### Возможности
* Регистрируйтесь.
* Создавайте отзывы на любые произведения.
* Делитесь своим мнением в комментариях к другим отзывам.

### Наполнение .env-файла
- В корневой директории проекта в директории ```infra``` создать фаил ```.env``` и установить свои значения
``` python
SECRET_KEY = 'Ваш секретный код'
DEBUG = True
DB_ENGINE = django.db.backends.postgresql
DB_NAME = postgres
POSTGRES_USER = postgres
POSTGRES_PASSWORD = postgres
DB_HOST = db
DB_PORT = 5432
```
### Команды для запуска приложения в контейнерах
Для создания контейнера выполните команду в директории с файлом `docker-compose.yaml`
```docker-compose up ```
### Команды для заполнения базы данными
Вы можете наполнить базу вручную, используя функционал сайта, или через панель администратора. А можете перенести данные из локального проекта Yatube (того, что хранится на вашем компьютере) на сервер.

Для этого:
1. Через консоль перейдите к проекту Yatube на локальном компьютере.
2. Зайдите в директорию с файлом manage.py.
3. Экспортируйте данные в файл.
```
python manage.py dumpdata > dump.json
# Данные сохранятся в dump.json
```
4. Копируйте файл `dump.json` с локального компьютера на сервер. Для такой задачи есть утилита scp (от англ. secure copy — «защищённая копия»). Она копирует файлы на сервер по протоколу SSH. Выполните команду:
```
# scp my_file username@host:<путь-на-сервере>

# Укажите IP своего сервера и путь до своей домашней директории на сервере
scp dump.json praktikum@84.201.161.196:/home/имя_пользователя/.../папка_проекта_с_manage.py/
```
После выполнения этой команды файл `dump.json `появится в директории проекта на вашем сервере. Подключитесь к серверу и убедитесь в этом.
Работа на локальном компьютере завершена, продолжайте работать уже на сервере: выполните команды для переноса данных с SQLite на PostgreSQL:
```
# Закинуть dump.json на сервер через scp и выполнить там

python3 manage.py shell  
# выполнить в открывшемся терминале:
>>> from django.contrib.contenttypes.models import ContentType
>>> ContentType.objects.all().delete()
>>> quit()

python manage.py loaddata dump.json
```
Готово. Теперь все данные перенесены на сервер и доступны посетителям вашего проекта. Откройте свой проект в браузере и убедитесь в этом.

## Разработчик
Найденов Константин

E-mail: 
[Naidenov Konstantin](mailto:naiden1898@yandex.ru?subject=API%20YaMDb), 
